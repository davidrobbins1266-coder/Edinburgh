
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bonham â†” Edinburgh Castle Treasure Hunt</title>
  <style>
    :root {
      --bg: #0e1726; /* deep navy */
      --panel: #111827; /* slate */
      --text: #f9fafb; /* near white */
      --muted: #cbd5e1; /* gray */
      --accent: #ef4444; /* red */
      --accent2: #22c55e; /* green */
      --accent3: #3b82f6; /* blue */
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: linear-gradient(180deg, #0b1220, var(--bg));
      color: var(--text);
    }
    header {
      padding: 16px 20px;
      background: rgba(17,24,39,0.8);
      position: sticky;
      top: 0;
      backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .wrap { max-width: 780px; margin: 0 auto; padding: 16px; }
    .card {
      background: var(--panel);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    }
    h1 { font-size: 1.6rem; margin: 0 0 8px; }
    .subtitle { color: var(--muted); font-size: 0.95rem; }
    .controls { display: flex; gap: 8px; flex-wrap: wrap; margin: 12px 0 4px; }
    button, .btn {
      appearance: none; border: none; border-radius: 12px; padding: 10px 14px;
      font-weight: 600; color: #fff; cursor: pointer;
      background: var(--accent3);
      box-shadow: 0 6px 16px rgba(59,130,246,0.35);
    }
    .btn-secondary { background: var(--accent); box-shadow: 0 6px 16px rgba(239,68,68,0.35); }
    .btn-ok { background: var(--accent2); box-shadow: 0 6px 16px rgba(34,197,94,0.35); }
    .panel {
      margin-top: 14px; background: rgba(255,255,255,0.04);
      border: 1px dashed rgba(255,255,255,0.12); border-radius: 12px; padding: 12px;
    }
    .clue { font-size: 1.05rem; line-height: 1.5; }
    .hint { color: var(--muted); font-style: italic; }
    .progress { margin-top: 10px; font-size: 0.95rem; color: var(--muted); }
    .badge { display: inline-block; background: rgba(59,130,246,0.2); color: #fff; padding: 6px 10px; border-radius: 999px; margin: 4px 6px 0 0; font-size: 0.85rem; }
    .footer { color: var(--muted); font-size: 0.9rem; margin-top: 18px; }
    .maplist a { display:block; color:#93c5fd; text-decoration:none; margin:8px 0; }
    .maplist a:hover { text-decoration: underline; }
    .timer { font-variant-numeric: tabular-nums; }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Bonham â†” Edinburgh Castle Treasure Hunt</h1>
      <div class="subtitle">Family-friendly, ~1 hour each way Â· Clues unlock one-by-one Â· Photo challenges + map links</div>
    </div>
  </header>

  <main class="wrap">
    <div class="card" id="app">
      <div id="intro">
        <p>Welcome, explorers! Start outside <strong>The Bonham Hotel</strong> (35 Drumsheugh Gardens). Each clue guides you through streets, monuments and curious objects on the way to <strong>Edinburgh Castle</strong>, then back again. Tap <em>Start Hunt</em> to begin.</p>
        <div class="controls">
          <button id="startBtn">Start Hunt</button>
          <button id="toggleTimer" class="btn-secondary">Timer: Off</button>
        </div>
        <div class="panel">
          <div><strong>Map quick links</strong></div>
          <div class="maplist">
            https://www.google.com/maps/search/?q=The+Bonham+Hotel+EdinburghThe Bonham Hotel</a>
            <a target="_blank" href="https://www.google.com/maps/search/?q=St+Andreww Square</a>
            https://www.google.com/maps/search/?q=The+Balmoral+Hotel+Edinburgh+1+Princes+StreetThe Balmoral (clock tower)</a>
            https://www.google.com/maps/search/?q=St+GilesSt Gilesâ€™ Cathedral & Heart of Midlothian</a>
            https://www.google.com/maps/search/?q=Mercat+Cross+Edinburgh+High+StreetMercat Cross</a>
            https://www.google.com/maps/search/?q=Edinburgh+CastleEdinburgh Castle</a>
            https://www.google.com/maps/search/?q=Floral+Clock+Princes+Street+Gardens+EdinburghPrinces Street Gardens (Floral Clock)</a>
            https://www.google.com/maps/search/?q=Scott+Monument+EdinburghScott Monument</a>
            https://www.google.com/maps/search/?q=Randolph+Crescent+EdinburghRandolph Crescent</a>
          </div>
        </div>
      </div>

      <div id="play" style="display:none">
        <div class="progress">
          <span id="legLabel">Outbound to Castle</span> Â· Clue <span id="clueNum">1</span>/<span id="clueTotal">?</span> Â· <span class="timer" id="timer">60:00</span>
        </div>
        <div class="panel">
          <div class="clue" id="clueText"></div>
          <div class="hint" id="hintText"></div>
        </div>
        <div class="controls">
          <button id="hintBtn" class="btn-secondary">Show hint</button>
          <button id="mapBtn" class="btn">Open map</button>
          <button id="photoBtn" class="btn">Photo challenge</button>
          <button id="doneBtn" class="btn-ok">Mark as done</button>
        </div>
        <div class="panel" id="photoPanel" style="display:none">
          <div><strong>Photo challenge:</strong> snap what the clue asks, or check it off.</div>
          <div class="controls" style="margin-top:8px">
            <button id="photoDone" class="btn-ok">I took the photo</button>
            <button id="photoSkip" class="btn-secondary">Skip</button>
          </div>
        </div>
        <div class="panel">
          <div><strong>Badges</strong></div>
          <div id="badges"></div>
        </div>
      </div>

      <div id="finish" style="display:none">
        <h2>ðŸŽ‰ Hunt complete!</h2>
        <p>You made it from The Bonham to Edinburgh Castle and back. Great exploring!</p>
        <div class="controls">
          <button id="restartBtn">Restart</button>
        </div>
      </div>

      <div class="footer">Tip: If crowds are heavy on the Royal Mile, use side lanes (Lady Stairâ€™s Close, Advocateâ€™s Close) to keep things moving.</div>
    </div>
  </main>

  <script>
    const legs = {
      outbound: [
        {
          clue: "Begin where elegance meets calm. Step outside and find the street with gardens and a famous Scottish painterâ€™s legacy. Follow it east toward grand crescents.",
          hint: "Start at Drumsheugh Gardens by The Bonham; head toward Randolph Place/Randolph Crescent.",
          map: "https://www.google.com/maps/search/?q=The+Bonham+Hotel+Edinburgh",
          photo: "Group selfie at The Bonham sign."
        },
        {
          clue: "Seek the square that carries a saintâ€™s name and a statue of a writer who loved adventure. Whatâ€™s his surname?",
          hint: "St Andrew Square; look for Robert Louis Stevenson statue.",
          map: "https://www.google.com/maps/search/?q=St+Andrew+Square+Edinburgh",
          photo: "Photo of the statue or any book in the square."
        },
        {
          clue: "On George Street, find the palatial bank with a golden dome. Count the columns and save the number.",
          hint: "Royal Bank of Scotland buildingâ€”grand frontage with columns.",
          map: "https://www.google.com/maps/search/?q=St+Andrew+Square+Edinburgh",
          photo: "Snap the dome or the columns."
        },
        {
          clue: "Turn toward the princeâ€™s avenue and walk to the clock tower that rules New Year. Beneath the Old Town, seek the cityâ€™s stone heart.",
          hint: "Princes Street to The Balmoral clock; Old Townâ€™s Heart of Midlothian set in the pavement by St Gilesâ€™ Cathedral.",
          map: "https://www.google.com/maps/search/?q=The+Balmoral+Hotel+Edinburgh+1+Princes+Street",
          photo: "Photo of the heart mosaic (no spittingâ€”itâ€™s a tradition but weâ€™ll pass!)."
        },
        {
          clue: "Near the heart stands a unicorn on the Mercat Cross. Take a proud pose, then climb the castle hill where cannons sleep.",
          hint: "Mercat Cross unicorn; head up the Royal Mile to Edinburgh Castle.",
          map: "https://www.google.com/maps/search/?q=Mercat+Cross+Edinburgh+High+Street",
          photo: "Photo with the unicorn or the Mercat Cross."
        },
        {
          clue: "Inside the castle, find Scotlandâ€™s smallest chapel. Whisper its name to the wind before you turn back.",
          hint: "St Margaretâ€™s Chapel.",
          map: "https://www.google.com/maps/search/?q=Edinburgh+Castle",
          photo: "Photo of the chapel exterior."
        }
      ],
      inbound: [
        {
          clue: "Leave the castle and stroll past tartan and whisky on the Royal Mile. Spot any kilt sign and name its colours.",
          hint: "Plenty of kilt/tartan shop signs along the Royal Mile.",
          map: "https://www.google.com/maps/search/?q=Edinburgh+Castle",
          photo: "Photo of a tartan display."
        },
        {
          clue: "Descend to the gardens and find the floral clock. What month does it show today?",
          hint: "Princes Street Gardensâ€™ Floral Clock near the west end.",
          map: "https://www.google.com/maps/search/?q=Floral+Clock+Princes+Street+Gardens+Edinburgh",
          photo: "Photo of the floral clock."
        },
        {
          clue: "A writer pierces the sky in gothic style. Name the monument and take a dramatic angle shot.",
          hint: "Scott Monument by Princes Street.",
          map: "https://www.google.com/maps/search/?q=Scott+Monument+Edinburgh",
          photo: "Low-angle shot of the Scott Monument."
        },
        {
          clue: "Curve back through crescents to reach your elegant origin. Count the black doors on the crescent and declare the tally.",
          hint: "Randolph Crescent area back toward Drumsheugh Gardens and The Bonham.",
          map: "https://www.google.com/maps/search/?q=Randolph+Crescent+Edinburgh",
          photo: "Final group photo at The Bonham."
        }
      ]
    };

    let state = {
      leg: 'outbound',
      idx: 0,
      timerOn: false,
      secs: 60*60,
      badges: []
    };

    const elIntro = document.getElementById('intro');
    const elPlay = document.getElementById('play');
    const elFinish = document.getElementById('finish');
    const elStart = document.getElementById('startBtn');
    const elRestart = document.getElementById('restartBtn');
    const elClueText = document.getElementById('clueText');
    const elHintText = document.getElementById('hintText');
    const elHintBtn = document.getElementById('hintBtn');
    const elDoneBtn = document.getElementById('doneBtn');
    const elMapBtn = document.getElementById('mapBtn');
    const elPhotoBtn = document.getElementById('photoBtn');
    const elPhotoPanel = document.getElementById('photoPanel');
    const elPhotoDone = document.getElementById('photoDone');
    const elPhotoSkip = document.getElementById('photoSkip');
    const elBadges = document.getElementById('badges');
    const elClueNum = document.getElementById('clueNum');
    const elClueTotal = document.getElementById('clueTotal');
    const elLegLabel = document.getElementById('legLabel');
    const elTimer = document.getElementById('timer');
    const elToggleTimer = document.getElementById('toggleTimer');

    function renderClue(){
      const legArr = legs[state.leg];
      const item = legArr[state.idx];
      elClueText.textContent = item.clue;
      elHintText.textContent = '';
      elClueNum.textContent = state.idx + 1;
      elClueTotal.textContent = legArr.length;
      elLegLabel.textContent = state.leg === 'outbound' ? 'Outbound to Castle' : 'Return to Bonham';
      elPhotoPanel.style.display = 'none';
    }
    function openMap(){
      const item = legs[state.leg][state.idx];
      window.open(item.map, '_blank');
    }
    function showHint(){
      elHintText.textContent = legs[state.leg][state.idx].hint;
    }
    function photoChallenge(){
      const item = legs[state.leg][state.idx];
      elPhotoPanel.style.display = 'block';
      elPhotoPanel.querySelector('div').innerHTML = `<strong>Photo challenge:</strong> ${item.photo}`;
    }
    function addBadge(text){
      const span = document.createElement('span');
      span.className = 'badge';
      span.textContent = text;
      elBadges.appendChild(span);
      state.badges.push(text);
    }
    function nextClue(){
      const legArr = legs[state.leg];
      if(state.idx < legArr.length - 1){
        state.idx += 1;
        renderClue();
      } else {
        if(state.leg === 'outbound'){
          addBadge('ðŸ° Castle reached');
          state.leg = 'inbound';
          state.idx = 0;
          state.secs = 60*60; // reset timer for inbound
          renderClue();
        } else {
          addBadge('âœ… Hunt complete');
          elPlay.style.display = 'none';
          elFinish.style.display = 'block';
        }
      }
    }

    let ticker;
    function formatSecs(s){
      const m = Math.floor(s/60), ss = String(s%60).padStart(2,'0');
      return `${String(m).padStart(2,'0')}:${ss}`;
    }
    function startTimer(){
      clearInterval(ticker);
      ticker = setInterval(()=>{
        if(!state.timerOn) return;
        state.secs = Math.max(0, state.secs-1);
        elTimer.textContent = formatSecs(state.secs);
      }, 1000);
    }

    document.getElementById('startBtn').addEventListener('click', ()=>{
      elIntro.style.display = 'none';
      elPlay.style.display = 'block';
      state.leg = 'outbound';
      state.idx = 0;
      state.badges = [];
      state.secs = 60*60;
      renderClue();
      startTimer();
    });
    document.getElementById('restartBtn') && document.getElementById('restartBtn').addEventListener('click', ()=>{
      elFinish.style.display = 'none';
      elIntro.style.display = 'block';
    });
    elHintBtn.addEventListener('click', showHint);
    elMapBtn.addEventListener('click', openMap);
    elPhotoBtn.addEventListener('click', photoChallenge);
    elPhotoDone.addEventListener('click', ()=>{ addBadge('ðŸ“¸ Photo taken'); elPhotoPanel.style.display='none'; });
    elPhotoSkip.addEventListener('click', ()=>{ elPhotoPanel.style.display='none'; });
    elDoneBtn.addEventListener('click', ()=>{ addBadge('ðŸ§© Clue solved'); nextClue(); });

    elToggleTimer.addEventListener('click', ()=>{
      state.timerOn = !state.timerOn;
      elToggleTimer.textContent = `Timer: ${state.timerOn ? 'On' : 'Off'}`;
      if(state.timerOn) startTimer();
    });

    // Initialize timer label
    elTimer.textContent = formatSecs(state.secs);
  </script>
</body>

